# 实验内容

实现自定义的重叠网络协议栈。

- lab05-1
实现简单传输控制协议 STCP（它是我们将实现的 SimpleNet 协议栈的传输层部分）的信号协议部分。本实验并不处理 STCP 的数据段传输，而是要实现 SYN、SYNACK、FIN 和 FINACK。
- lab05-2
实现 STCP 的数据传输协议。为了有效的在客户端和服务器之间传输数据（单向可靠字节流），STCP 使用了滑动窗口协议。数据传输协议应能够从 STCP 报文（包括 STCP 首部和数据段）的丢失或报文错误中恢复。
- lab05-3
实现简单重叠网络层 SON。将使用一个简单网络驱动程序来测试重叠网络层实现。重叠网络层通过一个进程实现。重叠网络中的每一个节点都运行一个 SON 进程。SON 进程维护该节点与所有它的邻居之间的 TCP 连接，它还维护一个与 SIP 层之间的本地 TCP 连接。SIP 层也被实现为一个进程，重叠网络中的每个节点都运行一个 SIP 进程。
- lab05-4
设计和实现简单网络协议 SIP，SIP 层负责连接协议栈中的 STCP 层和 SON 层。SIP 层被实现为一个进程。重叠网络中的每个节点都运行一个 SIP 进程。SIP 进程分别维护到 SON 进程和 STCP 进程的 TCP 连接。SIP 进程为 STCP 进程提供了 API，以在重叠网络中发送段到目的节点。SIP 进程使用 SIP 路由算法/协议来构建路由表。SIP 进程将 STCP 进程发送来的段封装进 SIP 数据报（一个 STCP 段在一个 SIP 数据报中，本实验不需要实现分片），然后使用 SON API 转发 SIP 报文到下一跳节点，直到到达目的节点。

# 运行编译方法
使用make命令编译

重叠网络进程应该在四台主机(或虚拟机)上运行以启动重叠网络.
进入son目录并运行./son&
所有son进程应在1分钟内启动好.

在所有son进程启动好后, 启动所有四个节点上的sip进程.
sip进程应在本地重叠网络初始化完并显示"Overlay network: waiting for connection from SIP process..."后启动. 
进入sip目录并运行./sip

要杀掉son进程和sip进程: 使用"kill -s 2 进程号"命令.

如果程序使用的端口号已被使用, 程序将退出.
